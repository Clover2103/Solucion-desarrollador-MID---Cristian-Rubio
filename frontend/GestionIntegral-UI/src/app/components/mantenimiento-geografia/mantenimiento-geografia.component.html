<div class="container-fluid py-4">
  <div class="row g-4">

    <div class="col-md-4">
      <div class="card shadow-sm border-0">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
          <h6 class="mb-0">1. Países</h6>
          <button class="btn btn-sm btn-light" (click)="abrirModal('Pais')">+</button>
        </div>
        <div class="list-group list-group-flush" style="max-height: 400px; overflow-y: auto;">
          <div *ngFor="let p of paises"
               (click)="seleccionarPais(p)"
               [class.active]="paisSeleccionado?.paisId === p.paisId"
               class="list-group-item list-group-item-action d-flex justify-content-between align-items-center cursor-pointer">
            {{ p.nombre }}
            <button class="btn btn-link text-danger btn-sm p-0" (click)="borrarPais(p.paisId); $event.stopPropagation()">×</button>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card shadow-sm border-0">
        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
          <h6 class="mb-0">2. Departamentos</h6>
          <button class="btn btn-sm btn-light" [disabled]="!paisSeleccionado" (click)="abrirModal('Departamento')">+</button>
        </div>
        <div class="list-group list-group-flush">
          <div *ngIf="!paisSeleccionado" class="p-3 text-muted text-center small">Selecciona un país</div>
          <div *ngFor="let d of departamentos"
               (click)="seleccionarDepto(d)"
               [class.active]="deptoSeleccionado?.departamentoId === d.departamentoId"
               class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
            {{ d.nombre }}
            <button class="btn btn-link text-danger btn-sm p-0" (click)="borrarDepto(d.departamentoId); $event.stopPropagation()">×</button>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card shadow-sm border-0">
        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
          <h6 class="mb-0">3. Ciudades</h6>
          <button class="btn btn-sm btn-light" [disabled]="!deptoSeleccionado" (click)="abrirModal('Ciudad')">+</button>
        </div>
        <div class="list-group list-group-flush">
          <div *ngIf="!deptoSeleccionado" class="p-3 text-muted text-center small">Selecciona un departamento</div>
          <div *ngFor="let c of ciudades"
               class="list-group-item d-flex justify-content-between align-items-center">
            {{ c.nombre }}
            <button class="btn btn-link text-danger btn-sm p-0" (click)="borrarCiudad(c.ciudadId)">×</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal d-block" tabindex="-1" *ngIf="mostrarModal" style="background: rgba(0,0,0,0.5)">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 shadow">
      <div class="modal-header border-0">
        <h5 class="modal-title">Nuevo {{ tipoNuevo }}</h5>
        <button type="button" class="btn-close" (click)="cerrarModal()"></button>
      </div>
      <div class="modal-body">
        <label class="form-label small text-muted">Nombre del registro</label>
        <input type="text" class="form-control" [(ngModel)]="nombreNuevo" placeholder="Ej: Colombia, Antioquia...">
      </div>
      <div class="modal-footer border-0">
        <button type="button" class="btn btn-light" (click)="cerrarModal()">Cancelar</button>
        <button type="button" class="btn btn-primary" (click)="guardar()">Guardar Registro</button>
      </div>
    </div>
  </div>
</div>
